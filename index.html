<!DOCTYPE html>
<html>
  <head>
    <title>Create Category</title>
  </head>
  <body>
    <h1>Create Category</h1>
    <form id="createCategoryForm" enctype="multipart/form-data">
      <label for="name">Category Name:</label>
      <input type="text" id="name" name="name" required /><br /><br />
      <label for="image">Category Image:</label>
      <input
        type="file"
        id="image"
        name="image"
        required
        accept="image/*"
      /><br /><br />
      <label for="subcategoryName">Subcategory Name:</label>
      <input
        type="text"
        id="subcategoryName"
        name="subCategories[0][name]"
        required
      /><br /><br />
      <label for="productName">Product Name:</label>
      <input
        type="text"
        id="productName"
        name="subCategories[0][products][0][name]"
        required
      /><br /><br />
      <label for="productBrand">Product Brand:</label>
      <input
        type="text"
        id="productBrand"
        name="subCategories[0][products][0][brand]"
        required
      /><br /><br />
      <label for="productPrice">Product Price:</label>
      <input
        type="number"
        id="productPrice"
        name="subCategories[0][products][0][price]"
        required
      /><br /><br />
      <label for="productShop">Product Shop:</label>
      <input
        type="text"
        id="productShop"
        name="subCategories[0][products][0][shop]"
        required
      /><br /><br />
      <label for="productImage">Product Image:</label>
      <input
        type="file"
        id="productImage"
        name="subCategories[0][products][0][image]"
        required
        accept="image/*"
      /><br /><br />
      <button type="submit">Create Category</button>
    </form>

    <script>
      document
        .getElementById("createCategoryForm")
        .addEventListener("submit", async (event) => {
          event.preventDefault();
          const formData = new FormData(event.target);

          // Append the form fields to the FormData object
          formData.append("name", document.getElementById("name").value);
          formData.append("image", document.getElementById("image").files[0]);
          formData.append(
            "subCategories[0][name]",
            document.getElementById("subcategoryName").value
          );
          formData.append(
            "subCategories[0][products][0][name]",
            document.getElementById("productName").value
          );
          formData.append(
            "subCategories[0][products][0][brand]",
            document.getElementById("productBrand").value
          );
          formData.append(
            "subCategories[0][products][0][price]",
            document.getElementById("productPrice").value
          );
          formData.append(
            "subCategories[0][products][0][shop]",
            document.getElementById("productShop").value
          );
          formData.append(
            "subCategories[0][products][0][image]",
            document.getElementById("productImage").files[0]
          );

          console.log(formData);

          try {
            const response = await fetch(
              "http://localhost:3000/api/categories",
              {
                method: "GET",
                body: formData,
              }
            );
            const data = await response.json();
            console.log("Here", data);
            // Handle the response as needed
          } catch (error) {
            console.error(error);
            // Handle error
          }
        });
    </script>
  </body>
</html>
